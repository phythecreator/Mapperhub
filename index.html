<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Geomarkr Test</title>
<script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
<script src="https://cdn.jsdelivr.net/npm/react-simple-maps@3.0.0/dist/react-simple-maps.umd.production.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { margin:0; font-family: sans-serif; background:#1f2937; color:#f9fafb; }
  #root { height: 100vh; display: flex; flex-direction: column; }
</style>
</head>
<body>
<div id="root"></div>
<script>
  (function(){
    const React = window.React;
    const ReactDOM = window.ReactDOM;
    const { useState, useEffect } = React;
    const { ComposableMap, Geographies, Geography, ZoomableGroup } = window['react-simple-maps'];
    const topojson = window.topojson;

    async function loadWorld() {
      const res = await fetch("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json");
      const topo = await res.json();
      const objName = Object.keys(topo.objects)[0];
      return topojson.feature(topo, topo.objects[objName]);
    }

    function App() {
      const [geoData, setGeoData] = useState(null);
      const [zoom, setZoom] = useState(1);
      const [center, setCenter] = useState([0,20]);

      useEffect(() => {
        loadWorld().then(setGeoData).catch(e => alert("Load error: "+e.message));
      }, []);

      if (!geoData) return React.createElement("p", null, "Loading map...");

      return React.createElement("div", { style: { flex: 1, display: "flex", flexDirection: "column" } },
        React.createElement("h1", { style: { textAlign: "center", margin: "1rem" } }, "Geomarkr Basic Map"),
        React.createElement(ComposableMap, { projectionConfig: { scale: 150 }, style: { flex: 1 } },
          React.createElement(ZoomableGroup, {
            zoom,
            center,
            onMoveEnd: ({ zoom: z, coordinates }) => {
              setZoom(z);
              setCenter(coordinates);
            },
            maxZoom: 8,
            minZoom: 1
          },
            React.createElement(Geographies, { geography: geoData },
              ({ geographies }) => geographies.map(geo => React.createElement(Geography, {
                key: geo.rsmKey,
                geography: geo,
                style: {
                  default: { fill: "#555", stroke: "#222", strokeWidth: 0.5 },
                  hover: { fill: "#f59e0b", stroke: "#fff", strokeWidth: 1 },
                  pressed: { fill: "#b45309", stroke: "#000", strokeWidth: 1 }
                }
              }))
            )
          )
        ),
        React.createElement("div", { style: { padding: "0.5rem", textAlign: "center" } },
          React.createElement("button", { onClick: () => setZoom(z => Math.min(8, z + 0.5)), style: { marginRight: 10 } }, "Zoom +"),
          React.createElement("button", { onClick: () => setZoom(z => Math.max(1, z - 0.5)) }, "Zoom -")
        )
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById("root"));
  })();
</script>
</body>
</html>

