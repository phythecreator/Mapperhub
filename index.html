from flask import Flask, send_file
import os

app = Flask(__name__)

# O nome exato do ficheiro que será descarregado
FILE_NAME = "Radioactive Steal a Brainrot (fix spawnlocation).rbxl"
FILE_PATH = os.path.join(app.root_path, FILE_NAME) 

# --- Função que retorna o HTML ---
def get_html_content():
    # O HTML completo, com o botão e a caixa de texto
    return f"""
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Download Simples</title>
    <style>
        body {{ font-family: Arial, sans-serif; padding: 50px; background-color: #f4f4f9; }}
        .container {{ 
            max-width: 600px; 
            margin: 0 auto; 
            text-align: center; 
            background-color: white; 
            padding: 30px; 
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }}
        .download-btn {{
            background-color: #e74c3c;
            color: white;
            padding: 15px 30px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }}
        .download-btn:hover {{
            background-color: #c0392b;
        }}
        textarea {{
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-top: 10px;
        }}
    </style>
</head>
<body>
    <div class="container">
        <h1>Download do Jogo</h1>
        <p>Clique no botão abaixo para descarregar o ficheiro **.rbxl**:</p>
        
        <a href="/download" class="download-btn">
            Steal a Brainrot Download
        </a>
        
        <p style="margin-top: 30px; color: #777;">
            Ficheiro: *{FILE_NAME}*
        </p>

        <hr style="margin: 30px 0;">

        <h2>Caixa de Texto</h2>
        <textarea rows="10" placeholder="Cole o código aqui (este campo é apenas para demonstração e não aciona o download)"></textarea>
        <br>
        <button style="padding: 10px 20px; margin-top: 10px; background-color: #ccc; border: none; border-radius: 5px;">Processar (Inativo)</button>
    </div>
</body>
</html>
"""

# --- ROTAS ---

# Rota principal: Retorna o HTML embutido
@app.route('/')
def index():
    return get_html_content()

# Rota de download: Envia o ficheiro
@app.route('/download', methods=['GET'])
def download_file():
    try:
        if not os.path.exists(FILE_PATH):
            # Se o ficheiro não for encontrado, retorna uma mensagem de erro
            return "Erro 404: O ficheiro não foi encontrado no servidor.", 404
            
        # Força o download do ficheiro
        return send_file(
            FILE_PATH,
            as_attachment=True,
            download_name=FILE_NAME, 
            mimetype='application/octet-stream' 
        )
    except Exception as e:
        return f"Ocorreu um erro: {str(e)}"

if __name__ == '__main__':
    app.run(debug=True)
